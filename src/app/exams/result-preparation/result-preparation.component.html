<div class="panel panel-primary">
  <div class="panel-heading">
    <h4 class="panel-title">Result Preperation</h4>
  </div>
  <div class="panel-body">
    <div class="row clearfix">
      <div class="col-md-3">
        <label for="course">Select Course</label>
        <select class="form-control" name="course" [(ngModel)]="selected_course" (change)="onCourseChange(selected_course)" >
          <option *ngFor="let c of courses " [ngValue]="c.id"> {{c.name}}</option>
         
        </select>
      </div>
      <div class="col-md-3">
        <label for="class">Select class</label>
        <select class="form-control" name="class" [(ngModel)]="selected_class"(change)="onClassChange(selected_class)">
          <option *ngFor="let cls of classes" [ngValue]="cls.id"> {{cls.name}}</option>
       
        </select>
      </div>
      <div class="col-md-3">
        <label for="section" >Select Section</label>
        <select class="form-control" name="section" [(ngModel)]="selected_section"(change)="onChange()">
            <option *ngFor="let sec of sections" [ngValue]="sec.id"> {{sec.name}}</option>
        </select>
      </div>

      <div class="col-md-3 ">
        <label for="exam">Select Exam</label>
        <select class="form-control" (change)="onChange()" [(ngModel)]="selected_term">
          <option *ngFor="let term of terms" [ngValue]="term.id"> {{term.name}}</option>
         
        </select>
      </div>

      <div class="col-md-3 form-top-margin ">
        <label for="subject">Select Subject</label>
        <select class="form-control" (change)="onChange()" [(ngModel)]="selected_subject">
          <option *ngFor="let sub of totlSub" [ngValue]="sub.id"> {{sub.name}}</option>
         
        </select>
      </div>
      <div class="col-md-6 form-top-margin-button">
        <button class="btn btn-primary" (click)="marksEntryNext()">Next</button>
    </div>
    </div>
    <div *ngIf="val==true">
      <div class="body form-top-margin">
        <div class="table-responsive">
          <div>
            <ngx-datatable class="material" [rows]="_resultPreparationObject" [sortType]="'multi'" [columnMode]="'force'" [headerHeight]="50"
              [footerHeight]="50" [rowHeight]="'auto'" [limit]="10">

              <ngx-datatable-column name="ID" prop="student_id">
                <ng-template let-column="column" ngx-datatable-header-template>{{column.name}}</ng-template>
                <ng-template let-value="value" ngx-datatable-cell-template>{{value}}</ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="Name" prop="student_name">
                <ng-template let-column="column" ngx-datatable-header-template>{{column.name}}</ng-template>
                <ng-template let-value="value" ngx-datatable-cell-template>{{value}}</ng-template>
              </ngx-datatable-column> 

              <ngx-datatable-column name="Total" prop="total">
                <ng-template let-column="column" ngx-datatable-header-template>{{column.name}}</ng-template>
                <ng-template let-value="value" ngx-datatable-cell-template>{{value}}</ng-template>
              </ngx-datatable-column>


            <ngx-datatable-column name="Discipline" prop="discipline">
              <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex"
               let-value="value" let-row="row">
                <span title="Double click to edit"
                 (click)="editing[rowIndex + '-discipline'] = true"
                  *ngIf="!editing[rowIndex + '-discipline']">
                  {{value}}
                </span>
                <input autofocus (blur)="updateValue($event, 'discipline', rowIndex)" 
                *ngIf="editing[rowIndex+ '-discipline']"
                  type="text" [value]="value" />
              </ng-template>
            </ngx-datatable-column>

           
              <ngx-datatable-column name="Result" prop="result">
                <ng-template let-column="column" ngx-datatable-header-template>{{column.name}}</ng-template>
                <ng-template let-value="value" ngx-datatable-cell-template>{{value}}</ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="Position" prop="position">
                <ng-template let-column="column" ngx-datatable-header-template>{{column.name}}</ng-template>
                <ng-template let-value="value" ngx-datatable-cell-template>{{value}}</ng-template>
              </ngx-datatable-column>
              
            </ngx-datatable>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="panel-footer">
    <button class="btn btn-primary" (click)="UpdateStudentResult()">Save Result</button>
  </div>
</div>